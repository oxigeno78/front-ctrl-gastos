# Internacionalización (i18n)

La aplicación soporta múltiples idiomas usando **next-intl**.

## Idiomas Disponibles

- **Español (esp)** - Idioma por defecto
- **English (eng)**

## Estructura de URLs

- Español (por defecto): `/esp/dashboard`, `/esp/auth/login`
- Inglés: `/eng/dashboard`, `/eng/auth/login`

## Archivos de Configuración

```
frontend/
├── i18n/
│   ├── config.ts       # Locales disponibles
│   ├── request.ts      # Carga de mensajes del servidor
│   └── routing.ts      # Navegación con soporte i18n
├── messages/
│   ├── esp.json        # Traducciones en español
│   └── eng.json        # Traducciones en inglés
└── middleware.ts       # Detección automática de idioma
```

## Uso en Componentes

### Componentes Cliente

```tsx
'use client';
import { useTranslations } from 'next-intl';

const MyComponent = () => {
  const t = useTranslations();
  return <h1>{t('dashboard.title')}</h1>;
};
```

### Componentes Servidor

```tsx
import { getTranslations } from 'next-intl/server';

export default async function Page() {
  const t = await getTranslations();
  return <h1>{t('dashboard.title')}</h1>;
}
```

### Con Namespace

```tsx
const t = useTranslations('dashboard');
// Accede a dashboard.title como t('title')
```

## Agregar Nuevo Idioma

1. **Crear archivo de traducciones**
   ```
   messages/fra.json
   ```

2. **Agregar locale en configuración**
   ```typescript
   // i18n/config.ts
   export const locales = ['esp', 'eng', 'fra'] as const;
   ```

3. **Agregar label en componentes**
   - Selector de idioma en registro/perfil

## Estructura de Traducciones

```json
{
  "common": {
    "save": "Guardar",
    "cancel": "Cancelar",
    "delete": "Eliminar"
  },
  "dashboard": {
    "title": "Panel de Control",
    "welcome": "Bienvenido, {name}"
  },
  "transactions": {
    "add": "Agregar Transacción",
    "income": "Ingreso",
    "expense": "Gasto"
  }
}
```

## Idioma del Usuario

El idioma preferido del usuario se guarda en el perfil y se sincroniza con el backend. Al iniciar sesión o registrarse, la aplicación redirige automáticamente al locale correspondiente.

## Navegación con i18n

```tsx
import { useRouter } from '@/i18n/routing';

const router = useRouter();
router.push('/dashboard'); // Mantiene el locale actual
```

## Troubleshooting

### El idioma no cambia
- Verifica que el middleware esté configurado
- Revisa que la cookie de locale se esté guardando

### Traducciones no encontradas
- Verifica que la clave exista en el archivo JSON
- Revisa que el namespace sea correcto

### Error en Server Components
- Usa `getTranslations()` en lugar de `useTranslations()`
- Asegúrate de que sea una función async
